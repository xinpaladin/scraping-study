<iframe id="layer_view_iframe" scrolling="auto" allowtransparency="true" frameborder="0" src="//view42.book118.com/?readpage=pw8FWG5C0_kOxr_K_OD9kQ==&amp;furl=o4j9ZG7fK96zHppV4DUexOxagGZ1DhJUa7kK78fc3bcGinjLD50hHs7P6IWpE_UPJ1H3C7c4bF2GPd1Aj_StXzSNhJD0LOdUufM6avF9t8U=&amp;n=1"
    width="100%" height="100%"></iframe>

<html oncontextmenu="return false">

<head>
    <meta name="viewport" content="width=device-width">
    <title>3218988-57bed2b298b90</title>
    <style type="text/css">
        .zoombtn {
            padding-left: 5px;
            padding-right: 5px;
            cursor: pointer;
            border: 1px solid #ffffff;
            resize: none;
        }

        .zoombtn:hover {
            background-color: #efeeee;
            border: 1px solid #e9e8e8;
        }
    </style>

</head>

<body ondragstart="return false" onselectstart="return false" style="cursor:pointer;-moz-user-select: none;user-select:none;margin:0"
    oncontextmenu="return false">
    <div id="msg" style="position:absolute"></div>
    <div id="pdf" style="overflow-x: hidden; overflow-y: scroll; padding-bottom: 120px; height: 155px;">
        <div data-name="page" id="p1" style="text-align: center; margin: 10px auto; width: 792px; height: 1120px; max-width: 1244px;">
            <img style="border:1px solid #CACACA;max-width:1244px;width:792px;height:1120px" src="../img/?img=7o@o7xcocmkXhIhx64k8mEDf727DolVAAGWQ6T26LU5j1iv_01JoSa1Y9lWQVwn8Mk_rswxE5zw=">
        </div>
        <div data-name="page" id="p2" style="text-align:center;margin:10px auto;max-width:1244px;width:792px;height:1120px">
            <img style="border:1px solid #CACACA;max-width:1244px;width:792px;height:1120px" src="../img/?img=7o@o7xcocmkXhIhx64k8mEDf727DolVAAGWQ6T26LU5j1iv_01JoSSatO1LBUItM4agKvy@CbCE=">
        </div>
        <div data-name="page" id="p3" style="text-align:center;margin:10px auto;max-width:1244px;width:792px;height:1120px">
            <img style="border:1px solid #CACACA;max-width:1244px;width:792px;height:1120px" src="../img/?img=7o@o7xcocmkXhIhx64k8mEDf727DolVAAGWQ6T26LU5j1iv_01JoSVSshQPB8x4VaCwbcjac1Oc=">
        </div>
    </div>
    <input type="hidden" id="Url" value="QzpcT2ZmaWNlV2ViMzY1XE9mZmljZVdlYlxjYWNoZVxQREZcMTE2MDgyNTE5MTI1MDEzNDEwMjEwMTQxNzlfMTg5NDQwXDMyMTg5ODgtNTdiZWQyYjI5OGI5MC5kb2MudGVtcA=="
        autocomplete="off">
    <input type="hidden" id="Img" value="7o@o7xcocmkXhIhx64k8mEDf727DolVAAGWQ6T26LU5j1iv_01JoSVSshQPB8x4VaCwbcjac1Oc=" autocomplete="off">
    <input type="hidden" id="IsMobi" value="false" autocomplete="off">
    <input type="hidden" id="IsNet" value="True" autocomplete="off">
    <input type="hidden" id="Furl" value="o4j9ZG7fK96zHppV4DUexOxagGZ1DhJUa7kK78fc3bcGinjLD50hHs7P6IWpE_UPJ1H3C7c4bF2GPd1Aj_StXzSNhJD0LOdUufM6avF9t8U="
        autocomplete="off">
    <input type="hidden" id="ReadLimit" value="pw8FWG5C0_kOxr_K_OD9kQ==" autocomplete="off">
    <div id="ctl" style="position:fixed;bottom:10px;width:100%;border:0;margin-right:20px;font-size:16px;line-height:30px;font-family:Verdana,'Microsoft YaHei UI','Microsoft YaHei';text-shadow:#FFF 1px 0 0,#FFF 0 1px 0,#FFF -1px 0 0,#FFF 0 -1px 0;">
        <div style="position:fixed;left:0;bottom:5px;margin-left :20px;">第
            <span id="pageindex">1</span>页 共
            <span id="pagecount">38</span>页</div>
        <div id="loading" style="width: 100%; text-align: center; height: 60px; display: none;">
            <img style="width:242px;margin:auto" src="/Content/img/loading.gif">
        </div>
        <div id="ZoomDiv" style="float:right;bottom:5px;margin-right:40px">
            <span class="zoombtn">+</span>
            <span>100%</span>
            <span class="zoombtn">−</span>
        </div>
    </div>



    <script src="https://hm.baidu.com/hm.js?5d91dc9c92e499ab00ba867fc2294136"></script>
    <script src="/Scripts/jquery-1.11.1.min.js"></script>
    <script type="text/javascript">
        var drag = false;
        var cltX = 0;
        var cltY = 0;
        $("#pdf").mousedown(function (e) {
            cltX = $("#pdf").scrollLeft() + e.pageX;
            cltY = $("#pdf").scrollTop() + e.pageY;
            drag = true;
        });
        $("#pdf").mouseup(function (e) {
            drag = false;
        });
        $("#pdf").mousemove(function (e) {
            if (drag) {
                $("#pdf").scrollLeft(cltX - e.pageX);
                $("#pdf").scrollTop(cltY - e.pageY);
            }
        });
        document.onselectstart = function (e) {
            return false;
        }
        $("#ZoomDiv>span").eq(0).click(function () {
            var zoomsize = parseFloat($("#ZoomDiv>span").eq(1).html()) / 100;
            zoomsize = OffsetZoom(zoomsize);
            if (zoomsize < 0.49) {
                Zoom(0.1);
            } else {
                Zoom(0.2);
            }
        });
        $("#ZoomDiv>span").eq(2).click(function () {
            var zoomsize = parseFloat($("#ZoomDiv>span").eq(1).html()) / 100;
            zoomsize = OffsetZoom(zoomsize);
            if (zoomsize < 0.51) {
                Zoom(-0.1);
            } else {
                Zoom(-0.2);
            }
        });

        function OffsetZoom(zs) {
            zs = parseInt(zs * 10) * 10;
            $("#ZoomDiv>span").eq(1).html(zs + "%");
            return zs / 100;
        }

        function Zoom(n) {
            ZoomMtd(-1, n);
        }

        function ZoomMtd(eq, n) {
            var zoomsize = parseFloat($("#ZoomDiv>span").eq(1).html()) / 100;
            if (zoomsize + n <= 0) {
                return false;
            }
            var gtStr = "";
            if (eq > -1) {
                gtStr = ":gt(" + eq + ")";
                n = zoomsize - 1;
                zoomsize = 1;
            }
            var orgScrollY = $("#pdf").scrollTop() / document.getElementById("pdf").scrollHeight;
            var orgScrollX = $("#pdf").scrollLeft() / document.getElementById("pdf").scrollLeft;
            $("div[data-name='page']" + gtStr).each(function () {
                var w = parseInt($(this).children("img").eq(0).css("width"));
                var h = parseInt($(this).children("img").eq(0).css("height"));
                w = w / zoomsize * (zoomsize + n);
                h = h / zoomsize * (zoomsize + n);
                $(this).css("max-width", "");
                $(this).css("width", w + 1);
                $(this).css("height", h + 1);
                $(this).children("img").eq(0).css("max-width", "");
                $(this).children("img").eq(0).css("width", w);
                $(this).children("img").eq(0).css("height", h);
            });
            $("#pdf").scrollTop(document.getElementById("pdf").scrollHeight * orgScrollY);
            $("#pdf").scrollLeft(document.getElementById("pdf").scrollLeft * orgScrollX);
            $("#ZoomDiv>span").eq(1).html(parseInt((zoomsize + n) * 100) + "%");
        }
    </script>
    <script type="text/javascript">
        var locked = true;
        var pCount = 0;
        var nextpage = 0;
        var maxWidth = (window.innerWidth || document.documentElement.clientWidth) - 30;
        var isiPhoneFrm = false;
        var oriHeight = -1;
        getNextPage();
        $(window).load(function () {
            winResize();
        });
        $(window).resize(function () {
            winResize();
        });

        function winResize() {
            var pdf = $("#pdf");
            var winH = window.innerHeight || document.documentElement.clientHeight;
            pdf.css("height", winH - 120);
        }
        $("#pdf").scroll(function () {
            var h = $(this).height();
            var s = $(this).scrollTop();
            var docH = document.getElementById("pdf").scrollHeight;
            if ($("#p2").length > 0) {}
            GetPageIndex();
            if (nextpage > 0) {
                if (pCount > 0) {
                    if (nextpage > pCount) {
                        nextpage = 0;
                        return false;
                    }
                }
                if (h + s + 300 > docH) {
                    $("#loading").show();
                    if (!locked) {
                        getNextPage();
                    }
                }
            }
            return false;
        });

        function getNextPage() {
            if (nextpage == -1) {
                return false;
            }
            locked = true;
            $.ajax({
                type: "get",
                url: "GetNextPage/",
                data: {
                    f: $("#Url").val(),
                    img: $("#Img").val(),
                    isMobile: $("#IsMobi").val(),
                    isNet: $("#IsNet").val(),
                    readLimit: $("#ReadLimit").val(),
                    furl: $("#Furl").val()
                },
                dataType: "json",
                success: function (data) {
                    $("#loading").hide();
                    switch (data.NextPage) {
                        case "!":
                            return false;
                            break;
                        case "Over":
                            nextpage = -1;
                            return false;
                            break;
                        case "Error":
                            alert(data.ErrorMsg);
                            break;
                        case "Response":
                            location.href = data.ErrorMsg;
                            nextpage = -1;
                            return false;
                            break;
                        case "ReadLimit":
                            var insertPos = $("#Url");
                            insertPos.after(
                                "<div style='text-align:center;margin:30px auto 100px auto'>-- 试读结束只能查看 " +
                                data.ErrorMsg + " 页。继续阅读，请关闭本窗口，再点击付费阅读按钮。 --</div>");
                            nextpage = -1;
                            return false;
                            break;
                    }
                    nextpage = data.PageIndex + 1;
                    var imgWidth = data.Width;
                    var imgHeight = data.Height;
                    if (data.Width > maxWidth) {
                        imgWidth = maxWidth;
                        imgHeight = (maxWidth / data.Width) * data.Height;
                    }
                    var maxWidthCss = "max-width:" + maxWidth + "px;";
                    if ($("#ZoomDiv>span").length > 0) {
                        var imgScale = parseFloat($("#ZoomDiv>span").eq(1).html()) / 100;
                        if (imgScale != 1) {
                            maxWidthCss = "";
                        }
                        imgWidth = parseInt(imgScale * imgWidth);
                        imgHeight = parseInt(imgScale * imgHeight);
                    }
                    var div = $("#p" + data.PageIndex);
                    if (div.length > 0) {
                        if (data.PageIndex == 1) {
                            div.css("width", imgWidth);
                            div.css("height", imgHeight);
                        }
                        div.html("<img style='border:1px solid #CACACA;" + maxWidthCss + "width:" +
                            imgWidth + "px;height:" + imgHeight + "px' src='../img/?img=" + data.NextPage +
                            "'>");
                    } else {
                        var preDiv = $("#p" + (data.PageIndex - 1));
                        preDiv.after("<div data-name='page' id='p" + data.PageIndex +
                            "' style='text-align:center;margin:10px auto;" + maxWidthCss + "width:" +
                            imgWidth + "px;height:" + imgHeight +
                            "px'><img style='border:1px solid #CACACA;" + maxWidthCss + "width:" +
                            imgWidth + "px;height:" + imgHeight + "px' src='../img/?img=" + data.NextPage +
                            "'></div>");
                    }
                    if (data.PageIndex == 1) {
                        $("#pagecount").html(data.PageCount);
                        pCount = data.PageCount;
                        pload(data.PageWidth);
                        oriHeight = window.innerHeight;
                    }
                    $("#Img").val(data.NextPage);
                    if (pCount > 0 & data.PageIndex >= pCount) {
                        nextpage = -1;
                        return false;
                    }
                    if (data.PageIndex < 2) {
                        getNextPage();
                        return false;
                    } else {
                        if (data.PageIndex < 3) {
                            getNextPage();
                            return false;
                        }
                    }
                    locked = false;
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    locked = false;
                }
            });
        }

        function GetPageIndex() {
            var a = $("#pdf").height() / 2;
            $("div[data-name='page']").each(function () {
                var pos = $(this).position().top;
                var divId = $(this).attr("id");
                divId = divId.substring(1, divId.length);
                if (pos > 0) {
                    if (pos < a) {
                        $("#pageindex").html(divId);
                    } else {
                        $("#pageindex").html(parseInt(divId) - 1);
                    }
                    return false;
                }
            });
        }

        function pload(p1W) {
            var w = document.documentElement.clientWidth || window.innerWidth;
            if (w < p1W) {
                $("#viewport").attr("content", "width=device-width,minimum-scale=0.1,user-scalable=yes,initial-scale=" +
                    (w / p1W));;
            }
        }
        window.onresize = function () {
            if ($("#ZoomDiv>span").length > 0) {
                var imgScale = parseFloat($("#ZoomDiv>span").eq(1).html()) / 100;
                if (imgScale != 1) {
                    return false;
                }
            }
            maxWidth = (window.innerWidth || document.documentElement.clientWidth) - 30;
            $("div[data-name='page']").css("max-width", maxWidth);
            $("div[data-name='page']").children().css("max-width", maxWidth);
        }
    </script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?5d91dc9c92e499ab00ba867fc2294136";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</body>

</html>